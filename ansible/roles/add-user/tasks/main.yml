---
- name: Add the user.
  user:
    name: "{{ usr_name }}"
    comment: "{{ full_name }}"
    password: "{{ user_pw | password_hash('sha512', user_pw_salt) }}"
    shell: /bin/bash
- name: Set public key.
  authorized_key:
    user: "{{ usr_name }}"
    state: present
    exclusive: yes
    key: '{{ pub_key }}'
# there doesn't seem to be a mechanisim to set git configuration at the user scope
# these are all going into the global (system) level configuration
- name: Set gitconfig user
  git_config:
    name: user.name
    value: "{{ full_name }}"
- name: Set gitconfig email
  git_config:
    name: user.email
    value: "{{ usr_email }}"
